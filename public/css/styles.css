:root{
  --bg:#0c1116; --panel:#111821; --panel-2:#0f1520; --text:#e8f1f1; --muted:#9ab0b0;
  --brand:#0ea5a5; --ok:#10b981; --warn:#f59e0b; --danger:#ef4444; --card-border:#1f2a37;
  --font-scale:100%;
}
[data-theme="light"]{
  --bg:#f7fafc; --panel:#fff; --panel-2:#f2f5f8; --text:#0b1220; --muted:#51606f; --card-border:#e6edf3;
}
*{ box-sizing:border-box }
html,body{ height:100% }
body{ margin:0; background:var(--bg); color:var(--text);
  font: 14px/1.5 Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,Arial;
  font-size: calc(14px * var(--font-scale) / 100);
}

/* Layout */
.app{ display:grid; grid-template-columns: 270px 1fr; min-height:100vh }
.sidebar{ background:var(--panel); border-right:1px solid var(--card-border); padding:14px; position:sticky; top:0; height:100vh; overflow:auto }
.brand{ display:flex; gap:10px; align-items:center; margin-bottom:12px }
.logo{ width:38px;height:38px;border-radius:10px;display:grid;place-items:center;background:radial-gradient(ellipse at 30% 30%,var(--brand),#0891b2); }
.title{ font-weight:800 }
h6{ margin:12px 0 6px; color:var(--muted); font-size:12px; letter-spacing:.4px; text-transform:uppercase }

/* Differentiate Menus vs Links */
.nav .item{ 
  padding:8px 10px; border-radius:10px; cursor:pointer; display:flex; align-items:center; gap:10px;
  font: 600 14px/1.2 Inter, ui-sans-serif; color: var(--text);
}
.nav .item:hover{ background:rgba(255,255,255,.04) }
.nav .item.active{ background:rgba(14,165,165,.14); border:1px solid rgba(14,165,165,.35) }

.links .item{
  padding:8px 10px; border-radius:10px; cursor:pointer; display:flex; align-items:center; gap:10px;
  font: italic 400 13px/1.2 "Source Serif 4", ui-serif, Georgia, serif; color: var(--muted);
}
.links .item:hover{ background:rgba(255,255,255,.03); color:#c8d7d7 }

.socials-row a,.socials-compact a{ color:var(--muted); text-decoration:none; font-size:18px }
.socials-row{ display:flex; gap:10px; margin-top:8px }
.socials-compact{ opacity:.8 }

.topbar{ height:56px; border-bottom:1px solid var(--card-border); background:var(--panel);
  display:flex; align-items:center; justify-content:space-between; padding:0 12px; position:sticky; top:0; z-index:4 }
.burger{ cursor:pointer; display:grid; place-items:center; width:36px;height:36px; border-radius:10px }
.burger:hover{ background:rgba(255,255,255,.06) }
.main{ padding:14px; }

/* Cards, buttons, inputs */
.card{ background:var(--panel); border:1px solid var(--card-border); border-radius:14px; margin-bottom:12px }
.card-body{ padding:12px }
.card.tile{ padding:12px; cursor:pointer }
.card.tile:hover{ border-color:var(--brand) }

.btn{ background:var(--brand); color:#fff; border:none; border-radius:10px; padding:8px 12px; cursor:pointer }
.btn:hover{ filter:brightness(1.05) }
.btn.secondary{ background:#0f766e }
.btn.ghost{ background:transparent; border:1px solid var(--card-border); color:var(--text) }
.btn.danger{ background:var(--danger) }
.btn.ok{ background:var(--ok) }

.input, select, textarea{ width:100%; padding:8px 10px; border-radius:10px; border:1px solid var(--card-border);
  background:var(--panel-2); color:var(--text) }
textarea{ min-height:120px; resize:vertical }
.grid{ display:grid; gap:12px }
.grid.cols-2{ grid-template-columns: repeat(2,1fr) }
.grid.cols-4{ grid-template-columns: repeat(4,1fr) }
.grid.auto{ grid-auto-rows: 1fr }

/* Tables */
.table-wrap{ overflow:auto; }
.table{ width:100%; border-collapse:collapse; }
.table th,.table td{ padding:10px; border-bottom:1px solid var(--card-border); text-align:left; vertical-align:top }
.table thead th{ position:sticky; top:0; background:var(--panel); z-index:1 }

/* Warn/critical: bg highlight (not borders) */
.tr-warn td{ background: rgba(245,158,11,.12) }
.tr-danger td{ background: rgba(239,68,68,.12) }

/* Thumbnails + hover enlarge */
.thumb-wrap{ position:relative }
.thumb{ width:44px;height:44px;border-radius:10px; border:1px solid var(--card-border); object-fit:cover; overflow:hidden }
.thumb-large{ position:absolute; top:0; left:52px; width:220px; max-height:200px; object-fit:contain; display:none;
  border:1px solid var(--card-border); border-radius:12px; background:var(--panel); z-index:5; padding:4px }
.thumb-wrap:hover .thumb-large{ display:block }

/* Tasks: accept drops even when empty + pointer cursor */
.lane-row.drop{ outline: 2px dashed var(--brand); outline-offset: 2px }
.lane-grid{ display:grid; gap:12px; min-height:80px }
.task-card{ cursor: grab; }
.task-card:active{ cursor: grabbing; }
.task-card.dragging{ opacity:.6 }

/* Search popover */
.search-wrap{ position:relative }
#globalSearch{ width:100%; }
.search-results{ position:absolute; left:0; right:0; top:38px; background:var(--panel); border:1px solid var(--card-border); border-radius:12px;
  box-shadow:0 10px 24px rgba(0,0,0,.3); display:none; max-height:320px; overflow:auto; z-index:5 }
.search-results.active{ display:block }
.search-results .result{ padding:8px 10px; cursor:pointer }
.search-results .result:hover{ background:rgba(255,255,255,.05) }

/* Modals */
.modal-backdrop{ position:fixed; inset:0; backdrop-filter: blur(3px); background:rgba(0,0,0,.4); opacity:0; pointer-events:none; transition:.2s; z-index:10 }
.modal-backdrop.active{ opacity:1; pointer-events:auto }
.modal{ position:fixed; inset:0; display:grid; place-items:center; opacity:0; pointer-events:none; transition:.2s; z-index:11 }
.modal.active{ opacity:1; pointer-events:auto }
.modal .dialog{ width:min(720px, calc(100vw - 24px)); background:var(--panel); border:1px solid var(--card-border); border-radius:14px; overflow:hidden }
.modal .head,.modal .foot{ padding:10px 12px; border-bottom:1px solid var(--card-border); display:flex; align-items:center; justify-content:space-between }
.modal .foot{ border-top:1px solid var(--card-border); border-bottom:0 }
.modal .body{ padding:12px }
.img-modal .dialog{ width:min(920px, calc(100vw - 24px)) }
.imgbox{ display:grid; place-items:center; }
.imgbox img{ max-width:100%; max-height:70vh; border-radius:12px; border:1px solid var(--card-border) }

/* Login */
.login{ min-height:100vh; display:grid; place-items:center; padding:16px }
.login-card{ width:min(460px, 100%) }
.login-logo{ display:flex; align-items:center; gap:10px }
.login-note{ color:var(--muted); margin:8px 0 }

/* Backdrop when sidebar open (mobile) */
.backdrop{ position:fixed; inset:0; background:rgba(0,0,0,.4); opacity:0; pointer-events:none; transition:.2s; z-index:3 }
.sidebar-open .backdrop.active{ opacity:1; pointer-events:auto }

/* Toast */
.notification{ position:fixed; left:50%; transform:translateX(-50%); bottom:20px; background:#0f172a; color:#fff; border:1px solid #243045;
  padding:10px 12px; border-radius:12px; opacity:0; pointer-events:none; transition:.2s; z-index:50 }
.notification.show{ opacity:1 }
.notification.ok{ border-color:var(--ok) }
.notification.warn{ border-color:var(--warn) }
.notification.danger{ border-color:var(--danger) }

/* Small screens */
@media (max-width: 980px){
  .app{ grid-template-columns: 1fr }
  .sidebar{ position:fixed; left:0; transform:translateX(-105%); width:280px; z-index:6 }
  .sidebar.open{ transform:none }
}

/* in styles.css */
.table tbody tr.tr-warn { background: rgba(245, 158, 11, .12); }
.table tbody tr.tr-danger { background: rgba(239, 68, 68, .14); }