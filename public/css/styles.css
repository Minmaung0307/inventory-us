:root {
  --font-100: 14px;
  --font-200: 16px;
  --font-300: 18px;

  --bg: #0b0b0c;
  --panel: #121316;
  --panel-2: #17181c;
  --text: #e8eaed;
  --muted: #9aa0a6;
  --brand: #6ea8fe;
  --brand-2: #7ac3ff;
  --ok: #22c55e;
  --warn: #f59e0b;
  --danger: #ef4444;
  --border: rgba(255,255,255,.08);
  --shadow: 0 10px 30px rgba(0,0,0,.25);
}

html[data-theme="sunrise"]{
  --bg:#0e0d0c; --panel:#151311; --panel-2:#1b1916; --text:#fff3ea; --muted:#c9b8a8;
  --brand:#ff9d5c; --brand-2:#ffd1b0; --ok:#7bd88f; --warn:#ffb84d; --danger:#ff6b6b; --border:rgba(255,199,150,.18);
}
html[data-theme="sky"]{
  --bg:#061019; --panel:#0c1a27; --panel-2:#102233; --text:#eaf6ff; --muted:#a3c0d6;
  --brand:#66b6ff; --brand-2:#b3dbff; --ok:#78e3a0; --warn:#ffd166; --danger:#ff6b88; --border:rgba(102,182,255,.18);
}
html[data-theme="mint"]{
  --bg:#0a1311; --panel:#0f1b19; --panel-2:#142420; --text:#eafff8; --muted:#9fd4c4;
  --brand:#66f0c6; --brand-2:#b6ffea; --ok:#89ffb3; --warn:#ffe38f; --danger:#ff7f7f; --border:rgba(102,240,198,.16);
}
html[data-theme="slate"]{
  --bg:#0b0d10; --panel:#12151b; --panel-2:#171b22; --text:#e6edf3; --muted:#9aa6b2;
  --brand:#7aa2f7; --brand-2:#b7c6ff; --ok:#9ece6a; --warn:#e0af68; --danger:#f7768e; --border:rgba(122,162,247,.14);
}
html[data-theme="dark"]{
  --bg:#0a0a0a; --panel:#121212; --panel-2:#191919; --text:#f1f1f1; --muted:#b6b6b6;
  --brand:#8ab4f8; --brand-2:#bfd5ff; --ok:#34d399; --warn:#fbbf24; --danger:#f87171; --border:rgba(255,255,255,.1);
}

html[data-font="small"] { --fs: var(--font-100); }
html[data-font="medium"]{ --fs: var(--font-200); }
html[data-font="large"] { --fs: var(--font-300); }

* { box-sizing: border-box; }
body {
  margin:0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  font-size: var(--fs, 16px); color:var(--text); background:linear-gradient(180deg, var(--bg), #000);
  -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
}

a { color: var(--brand); text-decoration: none; }
a:hover { text-decoration: underline; }

/* Layout */
.app { display:grid; grid-template-columns: 280px 1fr; min-height: 100vh; }
@media (max-width: 920px){
  .app { grid-template-columns: 1fr; }
}

.sidebar {
  position: sticky; top:0; height: 100vh; overflow:auto; background:linear-gradient(180deg,var(--panel),var(--panel-2));
  border-right:1px solid var(--border);
}
.brand {
  display:flex; align-items:center; gap:10px; padding:16px; position: sticky; top:0; background:linear-gradient(180deg,var(--panel),transparent);
}
.brand .logo { width:38px; height:38px; display:grid; place-items:center; border-radius:12px; background:linear-gradient(135deg,var(--brand),var(--brand-2)); box-shadow: var(--shadow); }
.brand .title { font-weight:800; letter-spacing:.3px; }

.nav { padding:10px; display:grid; gap:4px; }
.nav .item {
  display:flex; align-items:center; gap:10px; padding:10px 12px; border-radius:10px; cursor:pointer;
  color:var(--text); border:1px solid transparent; transition:.2s ease;
}
.nav .item:hover { border-color:var(--border); background:rgba(255,255,255,.03); }
.nav .item.active { background:rgba(255,255,255,.06); border-color:var(--border); }

.topbar {
  position: sticky; top:0; z-index: 6;
  display:flex; justify-content:space-between; align-items:center; gap:10px;
  padding:12px 16px; background:linear-gradient(180deg,var(--panel),transparent);
  border-bottom:1px solid var(--border);
}
.search { display:flex; align-items:center; gap:8px; flex:1; max-width: 520px; position:relative; }
.input {
  background:var(--panel-2); color:var(--text); border:1px solid var(--border);
  border-radius:10px; padding:10px 12px; width:100%; outline:none; transition:.2s ease;
}
.input:focus{ border-color:var(--brand); box-shadow:0 0 0 3px color-mix(in srgb, var(--brand) 25%, transparent); }
.btn {
  appearance:none; border:none; border-radius:10px; padding:10px 12px; font-weight:600; cursor:pointer;
  background:var(--brand); color:#0a0a0a; box-shadow: var(--shadow); transition: transform .05s ease, opacity .2s ease;
}
.btn:hover{ opacity:.95; }
.btn:active{ transform: translateY(1px); }
.btn.ghost{ background:transparent; color:var(--text); border:1px solid var(--border); box-shadow:none; }
.btn.secondary{ background:linear-gradient(90deg,var(--brand),var(--brand-2)); color:#0b0b0b; }
.btn.danger{ background: var(--danger); color: #fff; }
.btn.ok{ background: var(--ok); color: #06210f; }

.main { padding:16px; display:grid; gap:12px; }
.card {
  background: linear-gradient(180deg, color-mix(in srgb, var(--panel) 92%, transparent), var(--panel-2));
  border:1px solid var(--border); border-radius:16px; box-shadow: var(--shadow);
}
.card-body { padding:14px; }
.card.clickable { cursor:pointer; }
.card.clickable:hover { outline:1px solid var(--border); transform: translateY(-1px); }

/* Grids */
.grid { display:grid; gap:12px; }
.cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
.cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
.cols-4 { grid-template-columns: repeat(4, minmax(0, 1fr)); }
@media (max-width:920px){ .cols-4, .cols-3, .cols-2{ grid-template-columns: 1fr; } }

.table-wrap { overflow:auto; }
.table { width:100%; border-collapse: collapse; }
.table th, .table td { padding:10px 8px; border-bottom:1px solid var(--border); white-space: nowrap; }
.table thead th { text-align:left; color:var(--muted); font-weight:600; }
.table td.num, .table th.num { text-align: right; }
.table tr.low td { background: rgba(255, 166, 0, .06); }
.table tr.critical td { background: rgba(239, 68, 68, .08); }

/* Totals */
.table tr.tr-total th, .table tr.tr-total td { font-weight:800; background:rgba(255,255,255,.03); }

/* Modal */
.modal-backdrop { display:none; position: fixed; inset:0; background:rgba(0,0,0,.6); z-index: 30; }
.modal { display:none; position: fixed; inset:0; z-index: 31; }
.modal.active + .modal-backdrop, .modal-backdrop.active { display:block; }
.modal.active { display:grid; place-items:center; padding:16px; }
.modal .dialog {
  width:min(980px, 96vw); background:var(--panel); border:1px solid var(--border); border-radius:14px; box-shadow: var(--shadow);
}
.modal .head, .modal .foot { padding:12px 14px; border-bottom:1px solid var(--border); display:flex; align-items:center; justify-content:space-between; }
.modal .foot { border-top:1px solid var(--border); border-bottom:none; }
.modal .body { padding:14px; }

/* Login */
.login-page { display:grid; place-items:center; min-height: 100vh; padding: 20px; }
.login-card { width:min(420px, 96vw); }
.login-grid { display:grid; gap:10px; }

/* Badges + chips */
.badge { display:inline-flex; gap:6px; align-items:center; padding:4px 8px; font-size:12px; border-radius:999px; background:rgba(255,255,255,.06); border:1px solid var(--border); }
.badge.warn { color: var(--warn); border-color: color-mix(in srgb, var(--warn) 35%, transparent); }
.badge.danger { color: var(--danger); border-color: color-mix(in srgb, var(--danger) 35%, transparent); }

/* Footer social */
.footer { display:flex; gap:10px; align-items:center; justify-content:center; padding:12px; color:var(--muted); }

/* Smooth transitions */
:root, .btn, .input, .card, .sidebar, .topbar, .table, .modal .dialog {
  transition: background .2s ease, border-color .2s ease, color .2s ease, box-shadow .2s ease, transform .2s ease;
}

/* Tiny helper for clickables inside tables */
.table .actions { display:flex; gap:6px; align-items:center; }

/* Quantity control */
.qty{ display:inline-flex; align-items:center; gap:8px; }
.qty .btn{ padding:4px 8px; line-height:1; }
.qty .qty-num{ min-width:36px; text-align:center; font-weight:800; }

/* Search dropdown */
.search-results {
  position:absolute; z-index: 10; background:var(--panel-2); border:1px solid var(--border); border-radius:10px; width:100%; max-height: 280px; overflow:auto;
  display:none;
}
.search-results.active{ display:block; }
.search-results .row{ padding:8px 10px; border-bottom:1px solid var(--border); cursor:pointer; }
.search-results .row:hover{ background:rgba(255,255,255,.04); }

/* Tiny notifications */
.notification {
  position: fixed; left:50%; transform:translateX(-50%); bottom:16px; padding:10px 12px; border-radius:12px;
  border:1px solid var(--border); background:var(--panel); color:var(--text); z-index: 100; display:none;
}
.notification.show{ display:block; }
.notification.ok{ border-color: color-mix(in srgb, var(--ok) 40%, transparent); }
.notification.warn{ border-color: color-mix(in srgb, var(--warn) 40%, transparent); }
.notification.danger{ border-color: color-mix(in srgb, var(--danger) 40%, transparent); }

/* Task lane drop highlight */
.lane-row.drop { outline: 2px dashed color-mix(in srgb, var(--brand) 55%, transparent); border-radius: 12px; }
.lane-row.drop .lane-grid { background: rgba(255,255,255,.03); border-radius: 12px; }

/* === Mobile drawer for sidebar + edge opener + mobile search === */
@media (max-width: 920px){
  .sidebar{
    position: fixed;
    top: 0; left: 0; bottom: 0;
    width: 280px;
    transform: translateX(-100%);
    transition: transform .28s ease, box-shadow .28s ease;
    z-index: 1100;
    box-shadow: 0 12px 30px rgba(0,0,0,.18);
    background: var(--panel-1);
  }
  body.sidebar-open .sidebar{ transform: translateX(0); }

  /* Backdrop already exists; just animate it on mobile */
  .backdrop{ opacity: 0; pointer-events: none; transition: opacity .25s ease; }
  .backdrop.active{ opacity: .6; pointer-events: auto; }

  /* Invisible left-edge “hot zone” that re-opens the drawer */
  #sidebarEdge{
    position: fixed;
    left: 0; top: 0; bottom: 0;
    width: 12px;
    z-index: 1099;
  }

  /* Use the sidebar search on mobile; hide any topbar inline search if present */
  .topbar .search-inline{ display: none !important; }
  .sidebar .search-wrap{ display: block !important; }
}

@media (min-width: 921px){
  #sidebarEdge{ display: none; }
}